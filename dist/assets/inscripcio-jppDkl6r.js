function d(){const s=document.getElementById("initial-view"),e=document.getElementById("registrationForm"),o=document.getElementById("btnMostrarFormulari"),t=document.getElementById("output"),n=document.getElementById("btnSubmit");o&&o.addEventListener("click",()=>{s.style.display="none",e.style.display="block"}),e&&e.addEventListener("submit",async a=>{a.preventDefault(),n.disabled=!0,n.textContent="Enviant...",t.style.display="none";const c=new FormData(e),l=Object.fromEntries(c.entries());try{const r=await(await fetch("/api/registerNewUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dades:l})})).json();if(r.status==="ok")t.className="success",t.textContent="Inscripció enviada correctament! Aviat rebràs notícies.",e.reset(),setTimeout(()=>{e.style.display="none",s.style.display="block",t.style.display="none"},3e3);else throw new Error(r.message||"Error desconegut del servidor.")}catch(i){t.className="error",t.textContent=`Error: ${i.message}`}finally{t.style.display="block",n.disabled=!1,n.textContent="Envia la Inscripció"}})}export{d as inscripcioPage};
